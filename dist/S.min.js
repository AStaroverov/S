!function(n){"use strict";var t=function(){function n(t,r){return n.lift(t,r)}function t(t,o){return"function"==typeof t?e(t,o):t instanceof Array?n.seq(t):r(t)}function r(n){function t(t){if(arguments.length>0){if(void 0===t)throw new Error("S.data can't be set to undefined.  In S, undefined is reserved for namespace lookup failures.");n=t,a(e),p()}else y&&y(r,o,e);return n}if(void 0===n)throw new Error("S.data can't be initialized with undefined.  In S, undefined is reserved for namespace lookup failures.");var r=v++,e=[],o=g;return t.S=new i,t.toString=l,t}function e(n){function t(){return y&&y(s,k,b),l}function r(){var t,r,u;if(!d){d=!0,r=y,y=e,u=g,g=k,h++;try{t=n(),void 0!==t&&(l=t,a(b))}finally{d=!1,y=r,g=u}o(h,w,m,S)}}function e(n,t,r){var e,o,u;for(e=0,o=p.length;o>e;e++)if(n===p[e])return u=m[e],null===r[u]&&(r[u]=S[e],S[e]=r),void(w[e]=h);for(u=r.length,p.push(n),w.push(h),m.push(u),S.push(r),e=0,o=Math.min(k.length,t.length);o>e&&k[e]===t[e];e++);for(r.push(T[e]),o=k.length;o>e;e++)k[e].offsets.push(u),k[e].listeners.push(r)}function i(){var n,t;for(n=0,t=m.length;t>n;n++)S[n][m[n]]=void 0,S[n]=void 0}function c(){return"[formula: "+n+"]"}var l,s=v++,h=1,d=!1,p=[],w=[],m=[],S=[],b=[],k=g,T=u(r,s,this);return t.S=new f(i),t.toString=c,T[T.length-1](),t}function o(n,t,r,e){var o,u,i,f,c;for(o=0,u=t.length;u>o;o++)i=t[o],0!==i&&n>i&&(f=e[o],c=r[o],e[o]=f[c],f[c]=null,t[o]=0)}function u(n,t,r){var e,o=[];for(r&&r.fn&&(n=r.fn(n,t)),o[g.length]=n,e=g.length-1;e>=0;e--)g.mod&&(n=g.mod(n,t)),o[e]=n;return o}function i(){}function f(n){this.detach=n}function c(n){this.detach=n}function a(n){var t,r,e;for(t=0,r=n.length;r>t;t++)e=n[t],e&&e()}function l(){return"[data: "+n.peek(this)+"]"}function s(n){function t(){var n,t;for(n=0,t=o.length;t>n;n++)o[n][e[n]]=void 0}var r=g,e=[],o=[];g=g.slice(),g.push({mod:this&&this.mod?this.mod:null,offsets:e,listeners:o});try{n()}finally{g=r}return{S:new c(t)}}function h(n){var t,r;if(y){t=y,y=void 0;try{r=n()}finally{y=t}}else r=n();return r}function d(n){w.push(n)}function p(){if(!y)for(;0!==w.length;)w.shift()()}var v=1,y=void 0,g=[],w=[];return n.lift=t,n.data=r,n.formula=e,n.region=s,n.peek=h,n.defer=d,n.data.S=i,f.prototype=new i,n.formula.S=f,n}();n.S=t,function(n){function t(n,t,e){this.head=void 0!==e?e:t&&void 0!==t.head?t.head:null,this.fn=t&&void 0!==t.fn?r(t.fn,n):n}function r(n,t){return function(r){return n(t(r))}}n.Chainable=t}(t),function(n){function t(t,r){n.Chainable.call(this,t,r)}function r(){return new t(c(),this)}function e(n){return new t(a(n),this)}function o(n){return new t(s(n),this)}function u(n){return new t(l(n),this)}function i(n){return new t(h(n),this)}function f(n){return new t(d(n),this)}function c(n){return void 0!==n?p(n):function(n){var t=!1;return function(){t||(t=!0,p(function(){t=!1,n()}))}}}function a(n){return function(t){return function(){setTimeout(t,n)}}}function l(n){return function(t){var r=0,e=!1;return function(){if(!e){var o=Date.now();o-r>=n?(r=o,t()):(e=!0,setTimeout(function(){r=Date.now(),e=!1,t()},n-(o-r)))}}}}function s(n){return function(t){var r=0;return function(){r&&clearTimeout(r),r=setTimeout(t,n)}}}function h(t){var r=[];return n.formula(function(){if(t()){for(var n=0;n<r.length;n++)r[n]();r=[]}}),function(n){return function(){r.push(n)}}}function d(t){var r=[];return n.formula(function(){if(t()){for(var n=0;n<r.length;n++)r[n]();r=[]}}),function(n){var t=!1;return function(){t||(t=!0,r.push(function(){t=!1,n()}))}}}var p=n.defer;t.prototype=new n.Chainable,t.prototype.S=n.formula,n.defer=t.prototype.defer=r,n.delay=t.prototype.delay=e,n.debounce=t.prototype.debounce=o,n.throttle=t.prototype.throttle=u,n.pause=t.prototype.pause=i,n.throttledPause=t.prototype.throttledPause=f}(t),function(n){function t(t){var r;return n.proc(function(){var e;return r&&r.S.detach(),r=n.region(function(){e=t()}),e})}n.rproc=t}(t),function(n){function t(){var t=Array.prototype.slice.call(arguments),r=function(){},e=t.pop(),o=t.length,u=new Array(o),i=n(function(){for(var e=0;o>e;e++)u[e]=t[e]();return n.peek(function(){return r.apply(void 0,u)})});return r=e,i}n.sub=t}(t),function(n){n.toJSON=function(n){return JSON.stringify(n,function(n,t){return"function"==typeof t&&t.S?t():t})}}(t)}(window);